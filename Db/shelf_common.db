record(mbbi, "$(dev):MCHTYPE") {
 field(DESC, "MCH vendor")
 field(DTYP, "MCHsensor")
 field(SCAN, "I/O Intr")
 field(INP, "#B0 C0 N0 @$(node)+mch")
 field(ZRST, "Unknown")
 field(ZRVL, "0")
 field(ZRSV, "MAJOR")
 field(ONST, "Vadatech")
 field(ONVL, "1")
 field(ONSV, "NO_ALARM")
 field(TWST, "NAT")
 field(TWVL, "2")
 field(TWSV, "NO_ALARM")
 field(PINI, "YES")
}

# Control debug message verbosity
record(mbbo, "$(dev):DBG") {
 field(DTYP, "MCHsensor")
 field(OMSL, "supervisory")
 field(ZRVL, "0")
 field(ZRST, "Off")
 field(ONVL, "1")
 field(ONST, "Low")
 field(TWVL, "2")
 field(TWST, "Med")
 field(THVL, "3")
 field(THST, "High")
 field(OUT,  "#B0 C0 N0 @$(node)+dbg")
 field(VAL,  "0")
 field(PINI, "YES")
}

record(bi, "$(dev):STAT") {
 field(DESC, "MCH online status")
 field(DTYP, "MCHsensor")
 field(SCAN, "I/O Intr")
 field(INP, "#B0 C0 N0 @$(node)+stat")
 field(ZNAM, "Offline")
 field(ZSV, "MAJOR")
 field(ONAM, "Online")
 field(OSV, "NO_ALARM")
 field(PINI, "YES")
}

record(mbbi, "$(dev):INIT") {
 field(DESC, "MCH comm initialized")
 field(DTYP, "MCHsensor")
 field(SCAN, "I/O Intr")
 field(INP, "#B0 C0 N0 @$(node)+init")
 field(ZRST, "Not initialized")
 field(ZRVL, "0")
 field(ZRSV, "MAJOR")
 field(ONST, "Initializing...")
 field(ONVL, "1")
 field(ONSV, "MINOR")
 field(TWST, "Initialized")
 field(TWVL, "2")
 field(TWSV, "NO_ALARM")
 field(THST, "Initialize failed")
 field(THVL, "3")
 field(THSV, "MAJOR")
 field(PINI, "YES")
}

record(bo, "$(dev):INITBYP") {
 field(DESC, "Override init for testing")
 field(DTYP, "MCHsensor")
 field(OMSL, "supervisory")
 field(OUT, "#B0 C0 N0 @$(node)+init")
 field(ZNAM, "Not initialized")
 field(ZSV, "MAJOR")
 field(ONAM, "Initialized")
 field(OSV, "NO_ALARM")
 field(PINI, "NO")
}

# Enable or disable session with MCH
record(bo, "$(dev):ACCESS") {
 field(DESC, "Enable comm with MCH")
 field(DTYP, "MCHsensor")
 field(OMSL, "supervisory")
 field(OUT, "#B0 C0 N0 @$(node)+sess")
 field(ZNAM, "Disable")
 field(ZSV, "MAJOR")
 field(ONAM, "Enable")
 field(OSV, "NO_ALARM")
 field(RVAL, "1")
 field(PINI, "YES")
}

# Sends Chassis Control IPMI command
# Vadatech MCH results are unreliable
# NAT MCH does not implement this command
# So, this record is not very useful
record(mbbo, "$(dev):POWERCTL") {
 field(DTYP, "MCHsensor")
 field(OMSL, "supervisory")
 field(OUT, "#B0 C0 N0 @$(node)+chas")
 field(ZRVL, "0")
 field(ZRST, "Power off")
 field(ONVL, "1")
 field(ONST, "Power on")
 field(THVL, "3")
 field(THST, "Hard reset")
 field(VAL, "1")
}

# Peform IPMI 'Cold Reset'
record(bo, "$(dev):RESET") {
 field(DTYP, "MCHsensor")
 field(OMSL, "supervisory")
 field(OUT, "#B0 C0 N0 @$(node)+reset")
}

# Not yet supported by Vadatech MCH
#record(ai, "$(dev):POWERSTATE") {
# field(DTYP, "MCHsensor")
# field(INP, "#B0 C0 N0 @$(node)+chas")
#}

